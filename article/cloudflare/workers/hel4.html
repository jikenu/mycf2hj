<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.12" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.44" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <title>hel4 code | Home Blog</title><meta name="description" content="My first VuePress Site">
    <link rel="preload" href="/assets/style-DgAOu3aL.css" as="style"><link rel="stylesheet" href="/assets/style-DgAOu3aL.css">
    <link rel="modulepreload" href="/assets/app-BKdByfKa.js"><link rel="modulepreload" href="/assets/hel4.html-DpGo2hqR.js">
    <link rel="prefetch" href="/assets/index.html-B0sdYNYA.js" as="script"><link rel="prefetch" href="/assets/get-started.html-B51a7tEd.js" as="script"><link rel="prefetch" href="/assets/Music.html-CCPZbOns.js" as="script"><link rel="prefetch" href="/assets/计算机网络上.html-VH0qKkZU.js" as="script"><link rel="prefetch" href="/assets/计算机网络下.html-BhSC8Veq.js" as="script"><link rel="prefetch" href="/assets/八股一.html-nc7PDqbp.js" as="script"><link rel="prefetch" href="/assets/八股二.html-DhMo-x0T.js" as="script"><link rel="prefetch" href="/assets/Video.html-BRqCYmc6.js" as="script"><link rel="prefetch" href="/assets/fofa.html-DkZVPuTd.js" as="script"><link rel="prefetch" href="/assets/pages1.html-D6vv38iH.js" as="script"><link rel="prefetch" href="/assets/site1.html-B2JIIJgR.js" as="script"><link rel="prefetch" href="/assets/hel2.html-CzVvSAKK.js" as="script"><link rel="prefetch" href="/assets/hel3.html-CWvhajJI.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-BH-dQi-X.js" as="script"><link rel="prefetch" href="/assets/MySQL基础、锁、事务、分库分表、优化.html-Bnf0BB9_.js" as="script"><link rel="prefetch" href="/assets/MySQL索引连环18问.html-DslqbJSy.js" as="script"><link rel="prefetch" href="/assets/Mybatis.html-iKhMmXP8.js" as="script"><link rel="prefetch" href="/assets/ORM.html-MRr96crB.js" as="script"><link rel="prefetch" href="/assets/Rpc.html-C0cOr-zd.js" as="script"><link rel="prefetch" href="/assets/Spring.html-Dv-RjnX2.js" as="script"><link rel="prefetch" href="/assets/utilClass.html-D7dNFCe8.js" as="script"><link rel="prefetch" href="/assets/Kafka面试题.html-CMlYg-BI.js" as="script"><link rel="prefetch" href="/assets/MQ面试题.html-D17Phkgf.js" as="script"><link rel="prefetch" href="/assets/Redis.html-Bc7q9A2_.js" as="script"><link rel="prefetch" href="/assets/java_base1.html-BMmYlx4t.js" as="script"><link rel="prefetch" href="/assets/java_base2.html-DXQ8utnc.js" as="script"><link rel="prefetch" href="/assets/ConcurrentHashMap.html-BBUC_ji-.js" as="script"><link rel="prefetch" href="/assets/HashMap.html-WAy1As7E.js" as="script"><link rel="prefetch" href="/assets/HashMap线程安全.html-B1Vkr8cU.js" as="script"><link rel="prefetch" href="/assets/Java集合高频面试题.html-BpCm69rJ.js" as="script"><link rel="prefetch" href="/assets/AQS.html-4VWY0Dp_.js" as="script"><link rel="prefetch" href="/assets/Java多线程总结版.html-CD_ubz0x.js" as="script"><link rel="prefetch" href="/assets/Java多线程面试-基础.html-DZoR0N4l.js" as="script"><link rel="prefetch" href="/assets/如何设计线程池.html-kd8LXhzT.js" as="script"><link rel="prefetch" href="/assets/进程通信和线程通信的方式.html-0FN5FNUo.js" as="script"><link rel="prefetch" href="/assets/404.html-CRBgh1kn.js" as="script"><link rel="prefetch" href="/assets/index.html-BV1wHm7N.js" as="script"><link rel="prefetch" href="/assets/index.html-OflrodMe.js" as="script"><link rel="prefetch" href="/assets/index.html-DVU55qZd.js" as="script"><link rel="prefetch" href="/assets/index.html-BePLW9ZA.js" as="script"><link rel="prefetch" href="/assets/index.html-DmW_vSza.js" as="script"><link rel="prefetch" href="/assets/index.html-CPVxE6D1.js" as="script"><link rel="prefetch" href="/assets/index.html-DNgtu4bu.js" as="script"><link rel="prefetch" href="/assets/index.html-C6lPriPj.js" as="script"><link rel="prefetch" href="/assets/index.html-C83S-FVq.js" as="script"><link rel="prefetch" href="/assets/index.html-CjUHx4Lf.js" as="script"><link rel="prefetch" href="/assets/index.html-DXCrBglz.js" as="script"><link rel="prefetch" href="/assets/index.html-DBaTnT6c.js" as="script"><link rel="prefetch" href="/assets/index.html-Dl3oJyzx.js" as="script"><link rel="prefetch" href="/assets/index.html-B7n8xOr9.js" as="script"><link rel="prefetch" href="/assets/index.html-Cl2_RDOV.js" as="script"><link rel="prefetch" href="/assets/index.html-BnthcfIv.js" as="script"><link rel="prefetch" href="/assets/index.html-myRzWS6T.js" as="script"><link rel="prefetch" href="/assets/index.html-CrSs3JA8.js" as="script"><link rel="prefetch" href="/assets/index.html-0R4BNY_D.js" as="script"><link rel="prefetch" href="/assets/index.html-C62QYS8S.js" as="script"><link rel="prefetch" href="/assets/index.html-DyzGo4TP.js" as="script"><link rel="prefetch" href="/assets/index.html-06yCT1zS.js" as="script"><link rel="prefetch" href="/assets/index.html-BA2ojb-2.js" as="script"><link rel="prefetch" href="/assets/index.html--TJEFaLY.js" as="script"><link rel="prefetch" href="/assets/index.html-C0kvfRlu.js" as="script"><link rel="prefetch" href="/assets/index.html-CvVJrTN_.js" as="script"><link rel="prefetch" href="/assets/index.html-CJtDN41c.js" as="script"><link rel="prefetch" href="/assets/index.html-CauAkS49.js" as="script"><link rel="prefetch" href="/assets/index.html-Ex1afZlX.js" as="script"><link rel="prefetch" href="/assets/index.html-BJ7Cv9e3.js" as="script"><link rel="prefetch" href="/assets/index.html-DkIplsYW.js" as="script"><link rel="prefetch" href="/assets/index.html-BGsfKR-v.js" as="script"><link rel="prefetch" href="/assets/index.html-sx66WckS.js" as="script"><link rel="prefetch" href="/assets/index.html-BxC1D0HB.js" as="script"><link rel="prefetch" href="/assets/index.html-DRiDfzq9.js" as="script"><link rel="prefetch" href="/assets/index.html-skVKoMBN.js" as="script"><link rel="prefetch" href="/assets/index.html-42RLsYYw.js" as="script"><link rel="prefetch" href="/assets/index.html-ZlnJAo0L.js" as="script"><link rel="prefetch" href="/assets/index.html-CPgbOL2z.js" as="script"><link rel="prefetch" href="/assets/index.html-aAwp2CJe.js" as="script"><link rel="prefetch" href="/assets/index.html-aWmXLMqD.js" as="script"><link rel="prefetch" href="/assets/index.html-DdlleQ2g.js" as="script"><link rel="prefetch" href="/assets/index.html-CCeSdCza.js" as="script"><link rel="prefetch" href="/assets/index.html-Bo0lMcPI.js" as="script"><link rel="prefetch" href="/assets/index.html-Dcbk-yyU.js" as="script"><link rel="prefetch" href="/assets/index.html-pbVgEEMN.js" as="script"><link rel="prefetch" href="/assets/index.html-DGcWmg4-.js" as="script"><link rel="prefetch" href="/assets/index.html-OflrodMe.js" as="script"><link rel="prefetch" href="/assets/prod-DxPZqpt5.js" as="script"><link rel="prefetch" href="/assets/prod-DxPZqpt5.js" as="script"><link rel="prefetch" href="/assets/vidstack-audio-CMrYDtzf.js" as="script"><link rel="prefetch" href="/assets/vidstack-video-CstYCEQT.js" as="script"><link rel="prefetch" href="/assets/vidstack-dash-BSWklB5M.js" as="script"><link rel="prefetch" href="/assets/vidstack-hls-IF3Fs_nB.js" as="script"><link rel="prefetch" href="/assets/vidstack-vimeo-D4yDEmOV.js" as="script"><link rel="prefetch" href="/assets/vidstack-BTBUzdbF-Cao5mZMB.js" as="script"><link rel="prefetch" href="/assets/vidstack-youtube-C-Qx_YwP.js" as="script"><link rel="prefetch" href="/assets/vidstack-DscYSLiW-CA6XwpqT.js" as="script"><link rel="prefetch" href="/assets/vidstack-54Jpr2Lq-D7xTX0W_.js" as="script"><link rel="prefetch" href="/assets/prod-DxPZqpt5.js" as="script"><link rel="prefetch" href="/assets/prod-DxPZqpt5.js" as="script"><link rel="prefetch" href="/assets/vidstack-BP-l85ST-Br_Q3bYe.js" as="script"><link rel="prefetch" href="/assets/vidstack-player-default-layout-C1YejbOb.js" as="script"><link rel="prefetch" href="/assets/vidstack-player-ui-BLk2T6qT.js" as="script"><link rel="prefetch" href="/assets/vidstack-CyVF_YzU-BKujtnaF.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-BLjEpg1X.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/img/top.png" alt><!----><span class="vp-site-name hide-in-pad">Home Blog</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/article/audio/Music.html" aria-label="Music"><!---->Music<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/article/video/Video.html" aria-label="Video"><!---->Video<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/article/cloudflare/" aria-label="Cloudflare"><!---->Cloudflare<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/article/com408/" aria-label="计算机深入"><!---->计算机深入<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><!---->Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/java/basic/" aria-label="Java基础"><!---->Java基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/java/spring/" aria-label="Spring生态"><!---->Spring生态<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/java/datasource/" aria-label="数据及框架"><!---->数据及框架<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/" aria-label="中间件"><!---->中间件<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/java/utils/utilClass.html" aria-label="ClassUtils"><!---->ClassUtils<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="项目总结"><!--[--><!---->项目总结<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/java/project/Rpc.html" aria-label="Rpc示例"><!---->Rpc示例<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/java/project/ORM.html" aria-label="ORM示例"><!---->ORM示例<!----></a></li></ul></button></div></div></nav><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:none;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:block;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><!----><span class="vp-sidebar-title">Cloudflare</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">workers</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/article/cloudflare/workers/hel2.html" aria-label="hel2"><!---->hel2<!----></a></li><li><a class="route-link auto-link vp-sidebar-link vp-sidebar-page" href="/article/cloudflare/workers/hel3.html" aria-label="hel3"><!---->hel3<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link vp-sidebar-page active" href="/article/cloudflare/workers/hel4.html" aria-label="hel4"><!---->hel4<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">site</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">fofa</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->hel4 code</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-12-21T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 9 分钟</span><meta property="timeRequired" content="PT9M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color2 clickable" role="navigation">VPN</span><!--]--><meta property="articleSection" content="VPN"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color5 clickable" role="navigation">Cloudflare</span><span class="page-tag-item color8 clickable" role="navigation">Workers</span><!--]--><meta property="keywords" content="Cloudflare,Workers"></span></div><hr></div><!----><!----><div class="theme-hope-content"><p>hel4 代码日志 cmliu/WorkerVless2sub</p><h1 id="hel4-code" tabindex="-1"><a class="header-anchor" href="#hel4-code"><span>hel4 code</span></a></h1><p>from cmliu/WorkerVless2sub</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//注： cmliu/WorkerVless2sub 的脚本 2024.05.02日更新  无10011错误   无uuid项  </span></span>
<span class="line"><span class="token comment">//注：  https://hel4.2961819202.workers.dev/auto   直接出现vless节点码，  可绑定自定义域</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 部署完成后在网址后面加上这个，获取订阅器默认节点，/auto</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> mytoken<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;auto&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//快速订阅访问入口, 留空则不启动快速订阅</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置优选地址，不带端口号默认443，TLS订阅生成</span></span>
<span class="line"><span class="token keyword">let</span> addresses <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">	<span class="token string">&#39;icook.tw:2053#官方优选域名&#39;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token string">&#39;cloudflare.cfgo.cc#优选官方线路&#39;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token string">&#39;sp.rweek.top:80#从hel2copy的优选线路&#39;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token string">&#39;ali.055500.xyz:80#从hel2copy的优选线路&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置优选地址api接口</span></span>
<span class="line"><span class="token keyword">let</span> addressesapi <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">	<span class="token string">&#39;https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt&#39;</span><span class="token punctuation">,</span> <span class="token comment">//可参考内容格式 自行搭建。</span></span>
<span class="line">	<span class="token comment">//&#39;https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesipv6api.txt&#39;, //IPv6优选内容格式 自行搭建。</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置优选地址，不带端口号默认80，noTLS订阅生成</span></span>
<span class="line"><span class="token keyword">let</span> addressesnotls <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">	<span class="token string">&#39;www.visa.com.sg#官方优选域名&#39;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token string">&#39;www.wto.org:8080#官方优选域名&#39;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token string">&#39;www.who.int:8880#官方优选域名&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置优选noTLS地址api接口</span></span>
<span class="line"><span class="token keyword">let</span> addressesnotlsapi <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">	<span class="token string">&#39;https://raw.githubusercontent.com/cmliu/CFcdnVmess2sub/main/addressesapi.txt&#39;</span><span class="token punctuation">,</span> <span class="token comment">//可参考内容格式 自行搭建。</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> <span class="token constant">DLS</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span><span class="token comment">//速度下限</span></span>
<span class="line"><span class="token keyword">let</span> addressescsv <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">	<span class="token comment">//&#39;https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressescsv.csv&#39;, //iptest测速结果文件。</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> subconverter <span class="token operator">=</span> <span class="token string">&quot;apiurl.v1.mk&quot;</span><span class="token punctuation">;</span> <span class="token comment">//在线订阅转换后端，目前使用肥羊的订阅转换功能。支持自建psub 可自行搭建https://github.com/bulianglin/psub</span></span>
<span class="line"><span class="token keyword">let</span> subconfig <span class="token operator">=</span> <span class="token string">&quot;https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full_MultiMode.ini&quot;</span><span class="token punctuation">;</span> <span class="token comment">//订阅转换配置文件</span></span>
<span class="line"><span class="token keyword">let</span> noTLS <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//改为 true , 将不做域名判断 始终返回noTLS节点</span></span>
<span class="line"><span class="token keyword">let</span> link <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> edgetunnel <span class="token operator">=</span> <span class="token string">&#39;ed&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> RproxyIP <span class="token operator">=</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> proxyIPs <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">	<span class="token string">&#39;proxyip.aliyun.fxxk.dedyn.io&#39;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token string">&#39;proxyip.multacom.fxxk.dedyn.io&#39;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token string">&#39;proxyip.vultr.fxxk.dedyn.io&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> CMproxyIPs <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">	<span class="token comment">//{ proxyIP: &quot;proxyip.fxxk.dedyn.io&quot;, type: &quot;HK&quot; },</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> BotToken <span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> ChatID <span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token keyword">let</span> proxyhosts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token comment">//本地代理域名池</span></span>
<span class="line">	<span class="token comment">//&#39;ppfv2tl9veojd-maillazy.pages.dev&#39;,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> proxyhostsURL <span class="token operator">=</span> <span class="token string">&#39;https://raw.githubusercontent.com/cmliu/CFcdnVmess2sub/main/proxyhosts&#39;</span><span class="token punctuation">;</span><span class="token comment">//在线代理域名池URL</span></span>
<span class="line"><span class="token keyword">let</span> EndPS <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span><span class="token comment">//节点名备注内容</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> FileName <span class="token operator">=</span> <span class="token string">&#39;WorkerVless2sub&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> SUBUpdateTime <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">;</span><span class="token comment">//PB</span></span>
<span class="line"><span class="token comment">//let timestamp = now;</span></span>
<span class="line"><span class="token keyword">let</span> timestamp <span class="token operator">=</span> <span class="token number">4102329600000</span><span class="token punctuation">;</span><span class="token comment">//2099-12-31</span></span>
<span class="line"><span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[.*\]):?(\d+)?#?(.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> ip<span class="token punctuation">,</span> add_data <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token punctuation">(</span> BotToken <span class="token operator">!==</span> <span class="token string">&#39;&#39;</span> <span class="token operator">&amp;&amp;</span> ChatID <span class="token operator">!==</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://ip-api.com/json/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ip<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?lang=zh-CN</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">const</span> ipInfo <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\nIP: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ip<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n国家: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ipInfo<span class="token punctuation">.</span>country<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n&lt;tg-spoiler&gt;城市: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ipInfo<span class="token punctuation">.</span>city<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n组织: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ipInfo<span class="token punctuation">.</span>org<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\nASN: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ipInfo<span class="token punctuation">.</span>as<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>add_data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\nIP: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ip<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n&lt;tg-spoiler&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>add_data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	</span>
<span class="line">		<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">&quot;https://api.telegram.org/bot&quot;</span><span class="token operator">+</span> BotToken <span class="token operator">+</span><span class="token string">&quot;/sendMessage?chat_id=&quot;</span> <span class="token operator">+</span> ChatID <span class="token operator">+</span> <span class="token string">&quot;&amp;parse_mode=HTML&amp;text=&quot;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span></span>
<span class="line">			<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token string-property property">&#39;Accept&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html,application/xhtml+xml,application/xml;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token string-property property">&#39;Accept-Encoding&#39;</span><span class="token operator">:</span> <span class="token string">&#39;gzip, deflate, br&#39;</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token string-property property">&#39;User-Agent&#39;</span><span class="token operator">:</span> <span class="token string">&#39;Mozilla/5.0 Chrome/90.0.4430.72&#39;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> MamaJustKilledAMan <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;telegram&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;twitter&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;miaoko&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAddressesapi</span><span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>api <span class="token operator">||</span> api<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">let</span> newapi <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 创建一个AbortController对象，用于控制fetch请求的取消</span></span>
<span class="line">	<span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">const</span> timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">		controller<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取消所有请求</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2秒后触发</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// 使用Promise.allSettled等待所有API请求完成，无论成功或失败</span></span>
<span class="line">		<span class="token comment">// 对api数组进行遍历，对每个API地址发起fetch请求</span></span>
<span class="line">		<span class="token keyword">const</span> responses <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">apiUrl</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span>apiUrl<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> </span>
<span class="line">			<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token string-property property">&#39;Accept&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html,application/xhtml+xml,application/xml;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token string-property property">&#39;User-Agent&#39;</span><span class="token operator">:</span> <span class="token string">&#39;cmliu/WorkerVless2sub&#39;</span></span>
<span class="line">			<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">			<span class="token literal-property property">signal</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>signal <span class="token comment">// 将AbortController的信号量添加到fetch请求中，以便于需要时可以取消请求</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span>ok <span class="token operator">?</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// 遍历所有响应</span></span>
<span class="line">		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> response <span class="token keyword">of</span> responses<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// 检查响应状态是否为&#39;fulfilled&#39;，即请求成功完成</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&#39;fulfilled&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token comment">// 获取响应的内容</span></span>
<span class="line">				<span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span>value<span class="token punctuation">;</span></span>
<span class="line">				newapi <span class="token operator">+=</span> content <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// 无论成功或失败，最后都清除设置的超时定时器</span></span>
<span class="line">		<span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">const</span> newAddressesapi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>newapi<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 返回处理后的结果</span></span>
<span class="line">	<span class="token keyword">return</span> newAddressesapi<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAddressescsv</span><span class="token punctuation">(</span><span class="token parameter">tls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>addressescsv <span class="token operator">||</span> addressescsv<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	</span>
<span class="line">	<span class="token keyword">let</span> newAddressescsv <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">	</span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> csvUrl <span class="token keyword">of</span> addressescsv<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>csvUrl<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;获取CSV地址时出错:&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>status<span class="token punctuation">,</span> response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">continue</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		</span>
<span class="line">			<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 使用正确的字符编码解析文本内容</span></span>
<span class="line">			<span class="token keyword">let</span> lines<span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;\r\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">				lines <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;\r\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">				lines <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		</span>
<span class="line">			<span class="token comment">// 检查CSV头部是否包含必需字段</span></span>
<span class="line">			<span class="token keyword">const</span> header <span class="token operator">=</span> lines<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">const</span> tlsIndex <span class="token operator">=</span> header<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;TLS&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">const</span> speedIndex <span class="token operator">=</span> header<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 最后一个字段</span></span>
<span class="line">		</span>
<span class="line">			<span class="token keyword">const</span> ipAddressIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// IP地址在 CSV 头部的位置</span></span>
<span class="line">			<span class="token keyword">const</span> portIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">// 端口在 CSV 头部的位置</span></span>
<span class="line">			<span class="token keyword">const</span> dataCenterIndex <span class="token operator">=</span> tlsIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 数据中心是 TLS 的后一个字段</span></span>
<span class="line">		</span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>tlsIndex <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;CSV文件缺少必需的字段&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">continue</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		</span>
<span class="line">			<span class="token comment">// 从第二行开始遍历CSV行</span></span>
<span class="line">			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lines<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">const</span> columns <span class="token operator">=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">				<span class="token comment">// 检查TLS是否为&quot;TRUE&quot;且速度大于DLS</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>columns<span class="token punctuation">[</span>tlsIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> tls <span class="token operator">&amp;&amp;</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>columns<span class="token punctuation">[</span>speedIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token constant">DLS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">const</span> ipAddress <span class="token operator">=</span> columns<span class="token punctuation">[</span>ipAddressIndex<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token keyword">const</span> port <span class="token operator">=</span> columns<span class="token punctuation">[</span>portIndex<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token keyword">const</span> dataCenter <span class="token operator">=</span> columns<span class="token punctuation">[</span>dataCenterIndex<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">					<span class="token keyword">const</span> formattedAddress <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ipAddress<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dataCenter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">					newAddressescsv<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>formattedAddress<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;获取CSV地址时出错:&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">continue</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	</span>
<span class="line">	<span class="token keyword">return</span> newAddressescsv<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">ADD</span><span class="token punctuation">(</span><span class="token parameter">envadd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> addtext <span class="token operator">=</span> envadd<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[	|&quot;&#39;\r\n]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 将空格、双引号、单引号和换行符替换为逗号</span></span>
<span class="line">	<span class="token comment">//console.log(addtext);</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token punctuation">(</span>addtext<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span> addtext <span class="token operator">=</span> addtext<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token punctuation">(</span>addtext<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>addtext<span class="token punctuation">.</span>length <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span> addtext <span class="token operator">=</span> addtext<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> addtext<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">const</span> add <span class="token operator">=</span> addtext<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token comment">//console.log(add);</span></span>
<span class="line">	<span class="token keyword">return</span> add <span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">nginx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span>
<span class="line">	&lt;!DOCTYPE html&gt;</span>
<span class="line">	&lt;html&gt;</span>
<span class="line">	&lt;head&gt;</span>
<span class="line">	&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span>
<span class="line">	&lt;style&gt;</span>
<span class="line">		body {</span>
<span class="line">			width: 35em;</span>
<span class="line">			margin: 0 auto;</span>
<span class="line">			font-family: Tahoma, Verdana, Arial, sans-serif;</span>
<span class="line">		}</span>
<span class="line">	&lt;/style&gt;</span>
<span class="line">	&lt;/head&gt;</span>
<span class="line">	&lt;body&gt;</span>
<span class="line">	&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span>
<span class="line">	&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span>
<span class="line">	working. Further configuration is required.&lt;/p&gt;</span>
<span class="line">	</span>
<span class="line">	&lt;p&gt;For online documentation and support please refer to</span>
<span class="line">	&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span>
<span class="line">	Commercial support is available at</span>
<span class="line">	&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span>
<span class="line">	</span>
<span class="line">	&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span>
<span class="line">	&lt;/body&gt;</span>
<span class="line">	&lt;/html&gt;</span>
<span class="line">	</span><span class="token template-punctuation string">`</span></span></span>
<span class="line">	<span class="token keyword">return</span> text <span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> protocol<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">async</span> <span class="token function">fetch</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">TOKEN</span><span class="token punctuation">)</span> mytoken <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">TOKEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token comment">//mytoken = env.TOKEN.split(&#39;,&#39;) || mytoken;</span></span>
<span class="line">		BotToken <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">TGTOKEN</span> <span class="token operator">||</span> BotToken<span class="token punctuation">;</span></span>
<span class="line">		ChatID <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">TGID</span> <span class="token operator">||</span> ChatID<span class="token punctuation">;</span> </span>
<span class="line">		subconverter <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">SUBAPI</span> <span class="token operator">||</span> subconverter<span class="token punctuation">;</span></span>
<span class="line">		subconfig <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">SUBCONFIG</span> <span class="token operator">||</span> subconfig<span class="token punctuation">;</span></span>
<span class="line">		FileName <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">SUBNAME</span> <span class="token operator">||</span> FileName<span class="token punctuation">;</span></span>
<span class="line">		EndPS <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">PS</span> <span class="token operator">||</span> EndPS<span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">const</span> userAgentHeader <span class="token operator">=</span> request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;User-Agent&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">const</span> userAgent <span class="token operator">=</span> userAgentHeader <span class="token operator">?</span> userAgentHeader<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">const</span> format <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;format&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;format&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">let</span> host <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">let</span> uuid <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">let</span> sni <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">let</span> <span class="token constant">UD</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>timestamp <span class="token operator">-</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>timestamp <span class="token operator">*</span> <span class="token number">99</span> <span class="token operator">*</span> <span class="token number">1099511627776</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">UA</span><span class="token punctuation">)</span> MamaJustKilledAMan <span class="token operator">=</span> MamaJustKilledAMan<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">UA</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		total <span class="token operator">=</span> total <span class="token operator">*</span> <span class="token number">1099511627776</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">let</span> expire<span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>timestamp <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		link <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">LINK</span> <span class="token operator">||</span> link<span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">const</span> links <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		link <span class="token operator">=</span> links<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">)</span> addresses <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDAPI</span><span class="token punctuation">)</span> addressesapi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDAPI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDNOTLS</span><span class="token punctuation">)</span> addressesnotls <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDNOTLS</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDNOTLSAPI</span><span class="token punctuation">)</span> addressesnotlsapi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDNOTLSAPI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDCSV</span><span class="token punctuation">)</span> addressescsv <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">ADDCSV</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token constant">DLS</span> <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">DLS</span> <span class="token operator">||</span> <span class="token constant">DLS</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">/*</span>
<span class="line">		console.log(`</span>
<span class="line">			addresses: ${addresses}</span>
<span class="line">			addressesapi: ${addressesapi}</span>
<span class="line">			addressesnotls: ${addressesnotls}</span>
<span class="line">			addressesnotlsapi: ${addressesnotlsapi}</span>
<span class="line">			addressescsv: ${addressescsv}</span>
<span class="line">			DLS: ${DLS}</span>
<span class="line">		`);</span>
<span class="line">		*/</span></span>
<span class="line">		</span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">PROXYIP</span><span class="token punctuation">)</span> proxyIPs <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">PROXYIP</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token comment">//console.log(proxyIPs);</span></span>
<span class="line"></span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span>mytoken<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> mytoken<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">token</span> <span class="token operator">=&gt;</span> url<span class="token punctuation">.</span>pathname<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			host <span class="token operator">=</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">HOST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">const</span> hosts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">ADD</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">HOST</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				host <span class="token operator">=</span> hosts<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> hosts<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			uuid <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">UUID</span> <span class="token operator">||</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">;</span></span>
<span class="line">			path <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">PATH</span> <span class="token operator">||</span> <span class="token string">&quot;/?ed=2560&quot;</span><span class="token punctuation">;</span></span>
<span class="line">			sni <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">SNI</span> <span class="token operator">||</span> host<span class="token punctuation">;</span></span>
<span class="line">			edgetunnel <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">ED</span> <span class="token operator">||</span> edgetunnel<span class="token punctuation">;</span></span>
<span class="line">			RproxyIP <span class="token operator">=</span> env<span class="token punctuation">.</span><span class="token constant">RPROXYIP</span> <span class="token operator">||</span> RproxyIP<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>host <span class="token operator">==</span> <span class="token string">&quot;null&quot;</span> <span class="token operator">||</span> uuid <span class="token operator">==</span> <span class="token string">&quot;null&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">let</span> 空字段<span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>host <span class="token operator">==</span> <span class="token string">&quot;null&quot;</span> <span class="token operator">&amp;&amp;</span> uuid <span class="token operator">==</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">)</span> 空字段 <span class="token operator">=</span> <span class="token string">&quot;HOST/UUID&quot;</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>host <span class="token operator">==</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">)</span> 空字段 <span class="token operator">=</span> <span class="token string">&quot;HOST&quot;</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>uuid <span class="token operator">==</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">)</span> 空字段 <span class="token operator">=</span> <span class="token string">&quot;UUID&quot;</span><span class="token punctuation">;</span></span>
<span class="line">				EndPS <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 订阅器内置节点 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>空字段<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 未设置！！！</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">const</span> hasSos <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;sos&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>hasSos<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">const</span> hy2Url <span class="token operator">=</span> <span class="token string">&quot;https://hy2sub.pages.dev&quot;</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">const</span> subconverterResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>hy2Url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	</span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subconverterResponse<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error fetching lzUrl: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverterResponse<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverterResponse<span class="token punctuation">.</span>statusText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">	</span>
<span class="line">					<span class="token keyword">const</span> base64Text <span class="token operator">=</span> <span class="token keyword">await</span> subconverterResponse<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					link <span class="token operator">+=</span> <span class="token string">&#39;\n&#39;</span> <span class="token operator">+</span> <span class="token function">atob</span><span class="token punctuation">(</span>base64Text<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 进行 Base64 解码</span></span>
<span class="line">	</span>
<span class="line">				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token comment">// 错误处理</span></span>
<span class="line">				<span class="token punctuation">}</span>	</span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">await</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&quot;#获取订阅&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;CF-Connecting-IP&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">UA: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userAgentHeader<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/tg-spoiler&gt;\n域名: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token punctuation">.</span>hostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n&lt;tg-spoiler&gt;入口: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token punctuation">.</span>pathname <span class="token operator">+</span> url<span class="token punctuation">.</span>search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/tg-spoiler&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			host <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;host&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			uuid <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;uuid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			path <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			sni <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;sni&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> host<span class="token punctuation">;</span></span>
<span class="line">			edgetunnel <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;edgetunnel&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> edgetunnel<span class="token punctuation">;</span></span>
<span class="line">			RproxyIP <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;proxyip&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> RproxyIP<span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>url<span class="token punctuation">.</span>pathname<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;/sub&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token comment">//首页改成一个nginx伪装页</span></span>
<span class="line">				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">nginx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html; charset=UTF-8&#39;</span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>host <span class="token operator">||</span> <span class="token operator">!</span>uuid<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">const</span> responseText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span>
<span class="line">			缺少必填参数：host 和 uuid</span>
<span class="line">			Missing required parameters: host and uuid</span>
<span class="line">			پارامترهای ضروری وارد نشده: هاست و یوآی‌دی</span>
<span class="line">			</span>
<span class="line">			</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token punctuation">.</span>origin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/sub?host=[your host]&amp;uuid=[your uuid]&amp;path=[your path]</span>
<span class="line">			</span>
<span class="line">			</span>
<span class="line">			</span>
<span class="line">			</span>
<span class="line">			</span>
<span class="line">			</span>
<span class="line">				</span>
<span class="line">				https://github.com/cmliu/WorkerVless2sub</span>
<span class="line">				</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>responseText<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain; charset=utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>path <span class="token operator">||</span> path<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				path <span class="token operator">=</span> <span class="token string">&#39;/?ed=2560&#39;</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token comment">// 如果第一个字符不是斜杠，则在前面添加一个斜杠</span></span>
<span class="line">				path <span class="token operator">=</span> <span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> path <span class="token operator">:</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">+</span> path<span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		</span>
<span class="line">		noTLS <span class="token operator">=</span> host<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;notls&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> host<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;worker&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> host<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;trycloudflare&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> noTLS<span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">if</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token constant">NOTLS</span> <span class="token operator">==</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">)</span>noTLS <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;subconverter&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> MamaJustKilledAMan<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">PutAGunAgainstHisHeadPulledMyTriggerNowHesDead</span> <span class="token operator">=&gt;</span> userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>PutAGunAgainstHisHeadPulledMyTriggerNowHesDead<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> MamaJustKilledAMan<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">//首页改成一个nginx伪装页</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">nginx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html; charset=UTF-8&#39;</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;clash&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>format <span class="token operator">===</span> <span class="token string">&#39;clash&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;subconverter&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;nekobox&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;cf-workers-sub&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">const</span> subconverterUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/sub?target=clash&amp;url=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;insert=false&amp;config=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>subconfig<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;emoji=true&amp;list=false&amp;tfo=false&amp;scv=true&amp;fdn=false&amp;sort=false&amp;new_name=true</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">const</span> subconverterResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>subconverterUrl<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				</span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subconverterResponse<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error fetching subconverterUrl: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverterResponse<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverterResponse<span class="token punctuation">.</span>statusText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				</span>
<span class="line">				<span class="token keyword">const</span> subconverterContent <span class="token operator">=</span> <span class="token keyword">await</span> subconverterResponse<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				</span>
<span class="line">				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>subconverterContent<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> </span>
<span class="line">						<span class="token string-property property">&quot;Content-Disposition&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment; filename*=utf-8&#39;&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>FileName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; filename=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>FileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">						<span class="token string-property property">&quot;content-type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/plain; charset=utf-8&quot;</span><span class="token punctuation">,</span></span>
<span class="line">						<span class="token string-property property">&quot;Profile-Update-Interval&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>SUBUpdateTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">						<span class="token string-property property">&quot;Subscription-Userinfo&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">upload=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">UD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; download=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">UD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; total=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; expire=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>expire<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain; charset=utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;sing-box&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;singbox&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>format <span class="token operator">===</span> <span class="token string">&#39;singbox&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;subconverter&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>userAgent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;cf-workers-sub&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">const</span> subconverterUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/sub?target=singbox&amp;url=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;insert=false&amp;config=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>subconfig<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;emoji=true&amp;list=false&amp;tfo=false&amp;scv=true&amp;fdn=false&amp;sort=false&amp;new_name=true</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">const</span> subconverterResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>subconverterUrl<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subconverterResponse<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error fetching subconverterUrl: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverterResponse<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subconverterResponse<span class="token punctuation">.</span>statusText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				</span>
<span class="line">				<span class="token keyword">const</span> subconverterContent <span class="token operator">=</span> <span class="token keyword">await</span> subconverterResponse<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				</span>
<span class="line">				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>subconverterContent<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> </span>
<span class="line">						<span class="token string-property property">&quot;Content-Disposition&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment; filename*=utf-8&#39;&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>FileName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; filename=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>FileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">						<span class="token string-property property">&quot;content-type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/plain; charset=utf-8&quot;</span><span class="token punctuation">,</span></span>
<span class="line">						<span class="token string-property property">&quot;Profile-Update-Interval&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>SUBUpdateTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">						<span class="token string-property property">&quot;Subscription-Userinfo&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">upload=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">UD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; download=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">UD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; total=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; expire=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>expire<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain; charset=utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span><span class="token punctuation">(</span>host<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;workers.dev&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> host<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;pages.dev&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>proxyhostsURL<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>proxyhostsURL<span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">					</span>
<span class="line">						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">							console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;获取地址时出错:&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>status<span class="token punctuation">,</span> response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">							<span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 如果有错误，直接返回</span></span>
<span class="line">						<span class="token punctuation">}</span></span>
<span class="line">					</span>
<span class="line">						<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">						<span class="token keyword">const</span> lines <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">						<span class="token comment">// 过滤掉空行或只包含空白字符的行</span></span>
<span class="line">						<span class="token keyword">const</span> nonEmptyLines <span class="token operator">=</span> lines<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">line</span> <span class="token operator">=&gt;</span> line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					</span>
<span class="line">						proxyhosts <span class="token operator">=</span> proxyhosts<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>nonEmptyLines<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;获取地址时出错:&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				<span class="token comment">// 使用Set对象去重</span></span>
<span class="line">				proxyhosts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>proxyhosts<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">const</span> newAddressesapi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAddressesapi</span><span class="token punctuation">(</span>addressesapi<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">const</span> newAddressescsv <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAddressescsv</span><span class="token punctuation">(</span><span class="token string">&#39;TRUE&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			addresses <span class="token operator">=</span> addresses<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>newAddressesapi<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			addresses <span class="token operator">=</span> addresses<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>newAddressescsv<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">			<span class="token comment">// 使用Set对象去重</span></span>
<span class="line">			<span class="token keyword">const</span> uniqueAddresses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>addresses<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">let</span> notlsresponseBody<span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">if</span><span class="token punctuation">(</span>noTLS <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">const</span> newAddressesnotlsapi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAddressesapi</span><span class="token punctuation">(</span>addressesnotlsapi<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">const</span> newAddressesnotlscsv <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAddressescsv</span><span class="token punctuation">(</span><span class="token string">&#39;FALSE&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				addressesnotls <span class="token operator">=</span> addressesnotls<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>newAddressesnotlsapi<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				addressesnotls <span class="token operator">=</span> addressesnotls<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>newAddressesnotlscsv<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">const</span> uniqueAddressesnotls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>addressesnotls<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">				notlsresponseBody <span class="token operator">=</span> uniqueAddressesnotls<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">address</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">let</span> port <span class="token operator">=</span> <span class="token string">&quot;80&quot;</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token keyword">let</span> addressid <span class="token operator">=</span> address<span class="token punctuation">;</span></span>
<span class="line">				</span>
<span class="line">					<span class="token keyword">const</span> match <span class="token operator">=</span> addressid<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">if</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">							<span class="token keyword">const</span> parts <span class="token operator">=</span> address<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">							address <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">							<span class="token keyword">const</span> subParts <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">							port <span class="token operator">=</span> subParts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">							addressid <span class="token operator">=</span> subParts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">							<span class="token keyword">const</span> parts <span class="token operator">=</span> address<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">							address <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">							port <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">							<span class="token keyword">const</span> parts <span class="token operator">=</span> address<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">							address <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">							addressid <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						<span class="token punctuation">}</span></span>
<span class="line">					</span>
<span class="line">						<span class="token keyword">if</span> <span class="token punctuation">(</span>addressid<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">							addressid <span class="token operator">=</span> addressid<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						<span class="token punctuation">}</span></span>
<span class="line">					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">						address <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						port <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> port<span class="token punctuation">;</span></span>
<span class="line">						addressid <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> address<span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">	</span>
<span class="line">					<span class="token comment">//console.log(address, port, addressid);</span></span>
<span class="line"></span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span>edgetunnel<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;cmliu&#39;</span> <span class="token operator">&amp;&amp;</span> RproxyIP<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token comment">// 将addressid转换为小写</span></span>
<span class="line">					<span class="token keyword">let</span> lowerAddressid <span class="token operator">=</span> addressid<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token comment">// 初始化找到的proxyIP为null</span></span>
<span class="line">					<span class="token keyword">let</span> foundProxyIP <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">						</span>
<span class="line">					<span class="token comment">// 遍历CMproxyIPs数组查找匹配项</span></span>
<span class="line">					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> CMproxyIPs<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">if</span> <span class="token punctuation">(</span>lowerAddressid<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">							foundProxyIP <span class="token operator">=</span> item<span class="token punctuation">.</span>proxyIP<span class="token punctuation">;</span></span>
<span class="line">							<span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 找到匹配项，跳出循环</span></span>
<span class="line">						<span class="token punctuation">}</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">						</span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span>foundProxyIP<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token comment">// 如果找到匹配的proxyIP，赋值给path</span></span>
<span class="line">						path <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/proxyIP=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>foundProxyIP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token comment">// 如果没有找到匹配项，随机选择一个proxyIP</span></span>
<span class="line">						<span class="token keyword">const</span> randomProxyIP <span class="token operator">=</span> proxyIPs<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> proxyIPs<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						path <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/proxyIP=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>randomProxyIP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">					<span class="token keyword">const</span> vlessLink <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">vless://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>address<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?encryption=none&amp;security=&amp;type=ws&amp;host=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;path=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>addressid <span class="token operator">+</span> EndPS<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">					<span class="token keyword">return</span> vlessLink<span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">const</span> responseBody <span class="token operator">=</span> uniqueAddresses<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">address</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">let</span> port <span class="token operator">=</span> <span class="token string">&quot;443&quot;</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">let</span> addressid <span class="token operator">=</span> address<span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">				<span class="token keyword">const</span> match <span class="token operator">=</span> addressid<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">const</span> parts <span class="token operator">=</span> address<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">						address <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						<span class="token keyword">const</span> subParts <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">						port <span class="token operator">=</span> subParts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						addressid <span class="token operator">=</span> subParts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">const</span> parts <span class="token operator">=</span> address<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">						address <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						port <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">const</span> parts <span class="token operator">=</span> address<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;#&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">						address <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						addressid <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">				</span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span>addressid<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						addressid <span class="token operator">=</span> addressid<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;:&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">					address <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					port <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> port<span class="token punctuation">;</span></span>
<span class="line">					addressid <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> address<span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">				<span class="token comment">//console.log(address, port, addressid);</span></span>
<span class="line">		</span>
<span class="line">				<span class="token keyword">if</span> <span class="token punctuation">(</span>edgetunnel<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;cmliu&#39;</span> <span class="token operator">&amp;&amp;</span> RproxyIP<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					<span class="token comment">// 将addressid转换为小写</span></span>
<span class="line">					<span class="token keyword">let</span> lowerAddressid <span class="token operator">=</span> addressid<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token comment">// 初始化找到的proxyIP为null</span></span>
<span class="line">					<span class="token keyword">let</span> foundProxyIP <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">				</span>
<span class="line">					<span class="token comment">// 遍历CMproxyIPs数组查找匹配项</span></span>
<span class="line">					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> CMproxyIPs<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token keyword">if</span> <span class="token punctuation">(</span>lowerAddressid<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">							foundProxyIP <span class="token operator">=</span> item<span class="token punctuation">.</span>proxyIP<span class="token punctuation">;</span></span>
<span class="line">							<span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 找到匹配项，跳出循环</span></span>
<span class="line">						<span class="token punctuation">}</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">				</span>
<span class="line">					<span class="token keyword">if</span> <span class="token punctuation">(</span>foundProxyIP<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token comment">// 如果找到匹配的proxyIP，赋值给path</span></span>
<span class="line">						path <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/proxyIP=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>foundProxyIP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">						<span class="token comment">// 如果没有找到匹配项，随机选择一个proxyIP</span></span>
<span class="line">						<span class="token keyword">const</span> randomProxyIP <span class="token operator">=</span> proxyIPs<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> proxyIPs<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">						path <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/proxyIP=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>randomProxyIP<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">					<span class="token punctuation">}</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				</span>
<span class="line">				<span class="token keyword">let</span> 伪装域名 <span class="token operator">=</span> host <span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">let</span> 最终路径 <span class="token operator">=</span> path <span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">let</span> 节点备注 <span class="token operator">=</span> EndPS <span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">if</span><span class="token punctuation">(</span>proxyhosts <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>host<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;.workers.dev&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> host<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;pages.dev&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">					最终路径 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">					伪装域名 <span class="token operator">=</span> proxyhosts<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> proxyhosts<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">					节点备注 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>EndPS<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 已启用临时域名中转服务，请尽快绑定自定义域！</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">					sni <span class="token operator">=</span> 伪装域名<span class="token punctuation">;</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">				<span class="token keyword">const</span> vlessLink <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">vless://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>address<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?encryption=none&amp;security=tls&amp;sni=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sni<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;fp=random&amp;type=ws&amp;host=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>伪装域名<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;path=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>最终路径<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>addressid <span class="token operator">+</span> 节点备注<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">				<span class="token keyword">return</span> vlessLink<span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">let</span> combinedContent <span class="token operator">=</span> responseBody<span class="token punctuation">;</span> <span class="token comment">// 合并内容</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>link<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				combinedContent <span class="token operator">+=</span> <span class="token string">&#39;\n&#39;</span> <span class="token operator">+</span> link<span class="token punctuation">;</span></span>
<span class="line">				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;link: &quot;</span> <span class="token operator">+</span> link<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">if</span> <span class="token punctuation">(</span>notlsresponseBody<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				combinedContent <span class="token operator">+=</span> <span class="token string">&#39;\n&#39;</span> <span class="token operator">+</span> notlsresponseBody<span class="token punctuation">;</span></span>
<span class="line">				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;notlsresponseBody: &quot;</span> <span class="token operator">+</span> notlsresponseBody<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			</span>
<span class="line">			<span class="token keyword">const</span> base64Response <span class="token operator">=</span> <span class="token function">btoa</span><span class="token punctuation">(</span>combinedContent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重新进行 Base64 编码</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>base64Response<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> </span>
<span class="line">					<span class="token comment">//&quot;Content-Disposition&quot;: `attachment; filename*=utf-8&#39;&#39;${encodeURIComponent(FileName)}; filename=${FileName}`,</span></span>
<span class="line">					<span class="token string-property property">&quot;content-type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/plain; charset=utf-8&quot;</span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token string-property property">&quot;Profile-Update-Interval&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>SUBUpdateTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">					<span class="token string-property property">&quot;Subscription-Userinfo&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">upload=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">UD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; download=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">UD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; total=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; expire=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>expire<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span>
<span class="line">				<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">return</span> response<span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2961819202@qq.com">jikenu</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/article/cloudflare/workers/hel3.html" aria-label="hel3"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->hel3</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BKdByfKa.js" defer></script>
  </body>
</html>
