import{u as I,f as ae,h as te,i as J,j as le,P as se,t as re,k as ie,l as q,m as F,p as ce,q as U,s as t,v as ue,R as P,x as oe,y as ne,z as ve,C as Ee,A as he,B as de,D as pe,E as Ae,F as me,G as Be,H as ye,I as _,J as T,K as ge,L as H,M as fe}from"./app-BKdByfKa.js";const je=["/","/get-started.html","/article/audio/Music.html","/article/com408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8A.html","/article/com408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8B.html","/article/pdf/%E5%85%AB%E8%82%A1%E4%B8%80.html","/article/pdf/%E5%85%AB%E8%82%A1%E4%BA%8C.html","/article/video/Video.html","/article/cloudflare/fofa/fofa.html","/article/cloudflare/pages/pages1.html","/article/cloudflare/site/site1.html","/article/cloudflare/workers/hel2.html","/article/cloudflare/workers/hel3.html","/article/cloudflare/workers/hel4.html","/article/java/datasource/MySQL.html","/article/java/datasource/MySQL%E5%9F%BA%E7%A1%80%E3%80%81%E9%94%81%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E3%80%81%E4%BC%98%E5%8C%96.html","/article/java/datasource/MySQL%E7%B4%A2%E5%BC%95%E8%BF%9E%E7%8E%AF18%E9%97%AE.html","/article/java/datasource/Mybatis.html","/article/java/project/ORM.html","/article/java/project/Rpc.html","/article/java/spring/Spring.html","/article/java/utils/utilClass.html","/article/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/Kafka%E9%9D%A2%E8%AF%95%E9%A2%98.html","/article/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/MQ%E9%9D%A2%E8%AF%95%E9%A2%98.html","/article/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis.html","/article/java/basic/base/java_base1.html","/article/java/basic/base/java_base2.html","/article/java/basic/map/ConcurrentHashMap.html","/article/java/basic/map/HashMap.html","/article/java/basic/map/HashMap%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8.html","/article/java/basic/map/Java%E9%9B%86%E5%90%88%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98.html","/article/java/basic/thread/AQS.html","/article/java/basic/thread/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%80%BB%E7%BB%93%E7%89%88.html","/article/java/basic/thread/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%9D%A2%E8%AF%95-%E5%9F%BA%E7%A1%80.html","/article/java/basic/thread/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%BA%BF%E7%A8%8B%E6%B1%A0.html","/article/java/basic/thread/%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E5%92%8C%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F.html","/404.html","/article/audio/","/article/","/article/com408/","/article/pdf/","/article/video/","/article/cloudflare/fofa/","/article/cloudflare/","/article/cloudflare/pages/","/article/cloudflare/site/","/article/cloudflare/workers/","/article/java/datasource/","/article/java/","/article/java/project/","/article/java/spring/","/article/java/utils/","/article/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/article/java/basic/base/","/article/java/basic/","/article/java/basic/map/","/article/java/basic/thread/","/category/","/category/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/category/interview/","/category/java/","/category/vpn/","/category/project/","/category/springboot/","/tag/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/","/tag/%E9%9D%A2%E7%BB%8F/","/tag/pdf/","/tag/cloudflare/","/tag/pages/","/tag/workers/","/tag/mysql/","/tag/mybatis/","/tag/rpc/","/tag/%E9%80%9A%E4%BF%A1/","/tag/spring/","/tag/utils/","/tag/mq/","/tag/redis/","/tag/%E5%9F%BA%E7%A1%80/","/tag/data-structure/","/tag/thread/","/star/","/timeline/"],be="SEARCH_PRO_QUERY_HISTORY",m=I(be,[]),Fe=()=>{const{queryHistoryCount:l}=H,s=l>0;return{enabled:s,queryHistory:m,addQueryHistory:r=>{s&&(m.value=Array.from(new Set([r,...m.value.slice(0,l-1)])))},removeQueryHistory:r=>{m.value=[...m.value.slice(0,r),...m.value.slice(r+1)]}}},x=l=>je[l.id]+("anchor"in l?`#${l.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=H,B=I(He,[]),Ce=()=>{const l=$>0;return{enabled:l,resultHistory:B,addResultHistory:s=>{if(l){const r={link:x(s),display:s.display};"header"in s&&(r.header=s.header),B.value=[r,...B.value.slice(0,$-1)]}},removeResultHistory:s=>{B.value=[...B.value.slice(0,s),...B.value.slice(s+1)]}}},ke=l=>{const s=Ee(),r=J(),C=he(),c=q(0),f=F(()=>c.value>0),d=de([]);return pe(()=>{const{search:p,terminate:k}=Ae(),y=ge(n=>{const g=n.join(" "),{searchFilter:R=h=>h,splitWord:D,suggestionsFilter:L,...A}=s.value;g?(c.value+=1,p(n.join(" "),r.value,A).then(h=>R(h,g,r.value,C.value)).then(h=>{c.value-=1,d.value=h}).catch(h=>{console.warn(h),c.value-=1,c.value||(d.value=[])})):d.value=[]},H.searchDelay-H.suggestDelay);U([l,r],([n])=>y(n),{immediate:!0}),me(()=>{k()})}),{isSearching:f,results:d}};var De=ae({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:s}){const r=te(),C=J(),c=le(se),{enabled:f,addQueryHistory:d,queryHistory:p,removeQueryHistory:k}=Fe(),{enabled:y,resultHistory:n,addResultHistory:g,removeResultHistory:R}=Ce(),D=f||y,L=re(l,"queries"),{results:A,isSearching:h}=ke(L),i=ie({isQuery:!0,index:0}),v=q(0),E=q(0),M=F(()=>D&&(p.value.length>0||n.value.length>0)),w=F(()=>A.value.length>0),Q=F(()=>A.value[v.value]||null),Y=()=>{const{isQuery:e,index:a}=i;a===0?(i.isQuery=!e,i.index=e?n.value.length-1:p.value.length-1):i.index=a-1},K=()=>{const{isQuery:e,index:a}=i;a===(e?p.value.length-1:n.value.length-1)?(i.isQuery=!e,i.index=0):i.index=a+1},V=()=>{v.value=v.value>0?v.value-1:A.value.length-1,E.value=Q.value.contents.length-1},z=()=>{v.value=v.value<A.value.length-1?v.value+1:0,E.value=0},G=()=>{E.value<Q.value.contents.length-1?E.value+=1:z()},N=()=>{E.value>0?E.value-=1:V()},S=e=>e.map(a=>fe(a)?a:t(a[0],a[1])),W=e=>{if(e.type==="customField"){const a=Be[e.index]||"$content",[u,b=""]=ye(a)?a[C.value].split("$content"):a.split("$content");return e.display.map(o=>t("div",S([u,...o,b])))}return e.display.map(a=>t("div",S(a)))},j=()=>{v.value=0,E.value=0,s("updateQuery",""),s("close")},X=()=>f?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},c.value.queryHistory),p.value.map((e,a)=>t("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===a}],onClick:()=>{s("updateQuery",e)}},[t(_,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:u=>{u.preventDefault(),u.stopPropagation(),k(a)}})]))])):null,Z=()=>y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},c.value.resultHistory),n.value.map((e,a)=>t(P,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===a}],onClick:()=>{j()}},()=>[t(_,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(u=>S(u)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:u=>{u.preventDefault(),u.stopPropagation(),R(a)}})]))])):null;return ce("keydown",e=>{if(l.isFocusing){if(w.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const a=Q.value.contents[E.value];d(l.queries.join(" ")),g(a),r.push(x(a)),j()}}else if(y){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const{index:a}=i;i.isQuery?(s("updateQuery",p.value[a]),e.preventDefault()):(r.push(n.value[a].link),j())}}}}),U([v,E],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!w.value:!M.value}],id:"search-pro-results"},l.queries.length?h.value?t(ue,{hint:c.value.searching}):w.value?t("ul",{class:"search-pro-result-list"},A.value.map(({title:e,contents:a},u)=>{const b=v.value===u;return t("li",{class:["search-pro-result-list-item",{active:b}]},[t("div",{class:"search-pro-result-title"},e||c.value.defaultTitle),a.map((o,ee)=>{const O=b&&E.value===ee;return t(P,{to:x(o),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{d(l.queries.join(" ")),g(o),j()}},()=>[o.type==="text"?null:t(o.type==="title"?oe:o.type==="heading"?ne:ve,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?t("div",{class:"content-header"},o.header):null,t("div",W(o))])])})])})):c.value.emptyResult:D?M.value?[X(),Z()]:c.value.emptyHistory:c.value.emptyResult)}});export{De as default};
